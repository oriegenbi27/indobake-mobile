(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myproduct"],{"04d1":function(e,t,i){var r=i("342f"),a=r.match(/firefox\/(\d+)/i);e.exports=!!a&&+a[1]},"0767":function(e,t,i){"use strict";i("a09c")},"4e82":function(e,t,i){"use strict";var r=i("23e7"),a=i("e330"),s=i("59ed"),n=i("7b0b"),d=i("07fa"),o=i("577e"),l=i("d039"),c=i("addb"),u=i("a640"),v=i("04d1"),p=i("d998"),f=i("2d00"),_=i("512c"),g=[],h=a(g.sort),m=a(g.push),w=l((function(){g.sort(void 0)})),S=l((function(){g.sort(null)})),x=u("sort"),y=!l((function(){if(f)return f<70;if(!(v&&v>3)){if(p)return!0;if(_)return _<603;var e,t,i,r,a="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(r=0;r<47;r++)g.push({k:t+r,v:i})}for(g.sort((function(e,t){return t.v-e.v})),r=0;r<g.length;r++)t=g[r].k.charAt(0),a.charAt(a.length-1)!==t&&(a+=t);return"DGBEFHACIJK"!==a}})),C=w||!S||!x||!y,b=function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:o(t)>o(i)?1:-1}};r({target:"Array",proto:!0,forced:C},{sort:function(e){void 0!==e&&s(e);var t=n(this);if(y)return void 0===e?h(t):h(t,e);var i,r,a=[],o=d(t);for(r=0;r<o;r++)r in t&&m(a,t[r]);c(a,b(e)),i=a.length,r=0;while(r<i)t[r]=a[r++];while(r<o)delete t[r++];return t}})},"512c":function(e,t,i){var r=i("342f"),a=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!a&&+a[1]},a09c:function(e,t,i){},a434:function(e,t,i){"use strict";var r=i("23e7"),a=i("da84"),s=i("23cb"),n=i("5926"),d=i("07fa"),o=i("7b0b"),l=i("65f0"),c=i("8418"),u=i("1dde"),v=u("splice"),p=a.TypeError,f=Math.max,_=Math.min,g=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!v},{splice:function(e,t){var i,r,a,u,v,m,w=o(this),S=d(w),x=s(e,S),y=arguments.length;if(0===y?i=r=0:1===y?(i=0,r=S-x):(i=y-2,r=_(f(n(t),0),S-x)),S+i-r>g)throw p(h);for(a=l(w,r),u=0;u<r;u++)v=x+u,v in w&&c(a,u,w[v]);if(a.length=r,i<r){for(u=x;u<S-r;u++)v=u+r,m=u+i,v in w?w[m]=w[v]:delete w[m];for(u=S;u>S-r+i;u--)delete w[u-1]}else if(i>r)for(u=S-r;u>x;u--)v=u+r-1,m=u+i-1,v in w?w[m]=w[v]:delete w[m];for(u=0;u<i;u++)w[u+x]=arguments[u+2];return w.length=S-r+i,a}})},a640:function(e,t,i){"use strict";var r=i("d039");e.exports=function(e,t){var i=[][e];return!!i&&r((function(){i.call(null,t||function(){throw 1},1)}))}},addb:function(e,t,i){var r=i("4dae"),a=Math.floor,s=function(e,t){var i=e.length,o=a(i/2);return i<8?n(e,t):d(e,s(r(e,0,o),t),s(r(e,o),t),t)},n=function(e,t){var i,r,a=e.length,s=1;while(s<a){r=s,i=e[s];while(r&&t(e[r-1],i)>0)e[r]=e[--r];r!==s++&&(e[r]=i)}return e},d=function(e,t,i,r){var a=t.length,s=i.length,n=0,d=0;while(n<a||d<s)e[n+d]=n<a&&d<s?r(t[n],i[d])<=0?t[n++]:i[d++]:n<a?t[n++]:i[d++];return e};e.exports=s},c740:function(e,t,i){"use strict";var r=i("23e7"),a=i("b727").findIndex,s=i("44d2"),n="findIndex",d=!0;n in[]&&Array(1)[n]((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s(n)},c87d:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.$store.state.user?i("div",{staticClass:"pb-16 px-1"},["mitra"!==e.$store.state.user.role?i("div",{staticClass:"d-flex fill-width justify-space-between pt-4 text-h5 black--text px-4"},[i("v-btn",{staticClass:"d-flex font-weight-bold body-2 text-capitalize rounded-lg",staticStyle:{width:"47%"},attrs:{depressed:"product"===e.viewSelected,outlined:"product"!==e.viewSelected,color:"product"===e.viewSelected?"primary lighten-2":""},on:{click:function(t){t.preventDefault(),e.viewSelected="product"}}},[e._v(" My Product ")]),i("v-btn",{staticClass:"d-flex font-weight-bold body-2 text-capitalize rounded-lg",staticStyle:{width:"47%"},attrs:{depressed:"order"===e.viewSelected,outlined:"order"!==e.viewSelected,color:"order"===e.viewSelected?"primary lighten-2":""},on:{click:function(t){t.preventDefault(),e.viewSelected="order"}}},[e._v(" My Order ")])],1):e._e(),"mitra"!==e.$store.state.user.role?i("div",{staticClass:"px-4 pt-0"},["product"===e.viewSelected?i("div",{staticClass:"mt-2 elevation-0 py-2 transparent"},[i("v-expansion-panels",{staticClass:"transparent elevation-0 rounded-lg min-padding",attrs:{accordion:"",flat:""}},e._l(e.myProducts,(function(t,r){return i("v-expansion-panel",{key:"my-product-"+r},[i("v-expansion-panel-header",{staticClass:"px-2"},[i("v-card",{staticClass:"white d-flex fill-width align-center justify-space-between rounded-lg pr-2 elevation-0",attrs:{flat:""}},[i("div",{staticClass:"d-flex align-center"},[i("v-avatar",{staticClass:"rounded-lg",attrs:{color:"accent",size:"75",tile:""}},[i("v-img",{attrs:{src:e.$getImage(t.images)}})],1),i("div",{staticClass:"pl-3 py-2",staticStyle:{"line-height":"135%"}},[e._v(" "+e._s(t.name)+" ")])],1),i("div",{staticClass:"pl-2"},[e._v(" x"+e._s(t.quantity)+" ")])])],1),i("v-expansion-panel-content",e._l(t.order_list,(function(a,s){return i("div",{key:"order-detail-"+r+"-"+s,staticClass:"d-flex flex-column fill-width align-center px-4 py-2 accent rounded-lg mb-2"},[i("div",{staticClass:"d-flex justify-space-between align-center justify-center fill-width"},[i("div",{staticClass:"fill-width"},[i("div",{staticClass:"caption"},[e._v(" "+e._s(e.$localDT(a.order_date.replace(" ","T"),"display"))+" ")]),i("div",{staticClass:"d-flex align-center justify-space-between fill-width"},[e._v(" "+e._s(a.order_reference||"#")+" "),i("div",[parseInt(a.service_id)&&2!==parseInt(a.service_status)?i("v-chip",{staticClass:"ml-8 primary--text",attrs:{small:"",color:"accent"}},[e._v(" "+e._s(a.service_status_text)+" ")]):i("span",{staticClass:"pl-8"},[i("v-btn",{staticClass:"rounded-lg text-capitalize",attrs:{small:"",color:"primary lighten-2",depressed:"",dark:""},on:{click:function(i){return i.preventDefault(),e.OpenService({id:null,user:e.$store.state.user.id,product_name:t.name||"-",inv:a.order_reference||"#",product_id:t.product_id,order_id:a.order_id,notes:"",status:0})}}},[e._v(" Request New Service ")])],1)],1)]),parseInt(a.service_id)?i("div",{staticClass:"body-2 grey--text text--darken-2 d-flex fill-width align-center"},[i("v-icon",{staticClass:"mr-2",attrs:{"x-small":""}},[e._v(" mdi-comment-outline ")]),e._v(" "+e._s(a.service_notes)+" ")],1):e._e()])])])})),0)],1)})),1)],1):i("v-card",{staticClass:"mt-2 elevation-0 px-2 py-4 transparent"},[e.$store.state.order.data.length?i("div",e._l(e.$store.state.order.data.filter((function(e,t){return t<8})),(function(t,r){return i("div",{key:"order-"+r,staticClass:"py-1 mb-4 py-0"},[i("div",[t.iseller_detail?i("div",{staticClass:"d-flex fill-width justify-space-between align-center"},[e._v(" "+e._s(t.iseller_detail.order_reference||"#")+", "+e._s(e.$localDT(t.iseller_detail.order_date.replace(" ","T"),"display"))+" "),i("span",{staticClass:"text-capitalize"},[e._v(" "+e._s(t.iseller_detail.status)+" ")])]):i("div",[e._v(" - ")])]),i("v-divider",{staticClass:"grey lighten-2 my-2"}),t.iseller_detail?i("div",e._l(t.iseller_detail.order_details,(function(t,a){return i("div",{key:"product-item-"+r+"-"+a},[i("div",{staticClass:"d-flex fill-width justify-space-between align-center py-1",attrs:{"product-id":t.product_id}},[i("div",{staticClass:"grey--text text--darken-2"},[e._v(" "+e._s(t.quantity)+"x "+e._s(t.product_generic_name)+" ")])])])})),0):e._e(),t.iseller_detail?i("div",{staticClass:"body-1 text-right pt-3 pb-3 primary--text font-weight-bold"},[e._v(" "+e._s(e.$price(t.iseller_detail.total_amount))+" ")]):e._e(),i("v-divider",{staticClass:"grey lighten-3"})],1)})),0):i("div",{staticClass:"py-4 text-center"},[e._v(" no history ")])])],1):e._e(),"mitra"!==e.$store.state.user.role?["user"===e.$store.state.user.role?i("div",{staticStyle:{position:"fixed",bottom:"80px",left:"0px",width:"100%","text-align":"center","z-index":"1"}},[i("v-btn",{staticClass:"rounded-pill elevation-1 text-capitalize",attrs:{color:"primary lighten-2",dark:""},on:{click:function(t){t.preventDefault(),e.dialogService.show=!0}}},[e._v(" My Service Request ")])],1):e._e()]:e._e(),i("v-dialog",{attrs:{fullscreen:"",persistent:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialogService.show,callback:function(t){e.$set(e.dialogService,"show",t)},expression:"dialogService.show"}},[i("v-card",{staticClass:"rounded-0",attrs:{flat:""}},[i("v-toolbar",{staticClass:"elevation-0",attrs:{color:"accent"}},[i("v-toolbar-title",[e._v("My Services")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialogService.show=!1}}},[i("v-icon",[e._v("mdi-close")])],1)],1),i("v-card",{staticClass:"pb-4 elevation-0 rounded-0"},[e.dialogService.data.length?i("div",{staticClass:"pa-4"},e._l(e.dialogService.data,(function(t,r){return i("v-card",{key:"service-"+r,staticClass:"accent py-3 px-4 mb-4 rounded-lg",attrs:{flat:""}},[i("div",{staticClass:"d-flex flex-column fill-width"},[i("div",{staticClass:"d-flex fill-width align-center justify-space-between"},[i("div",[e._v(" "+e._s(e.GetServiceOrderNumber(t)||"")),i("br"),e._v(e._s(t.product_name||e.GetServiceProductName(t,t.product_id))+" ")]),i("v-chip",{staticClass:"primary--text",attrs:{small:"",color:"accent"}},[e._v(" "+e._s(e.ServiceStatus(t.status))+" ")])],1),i("v-divider",{staticClass:"my-2"}),i("div",{staticClass:"d-flex align-center justify-space-between align-center body-2"},[i("div",[e._v(" "+e._s(e.$localDT("","display"))+" ")]),i("div",[e._v(" "+e._s(t.notes||"-")+" "),i("v-icon",{staticClass:"ml-1",attrs:{small:""}},[e._v(" mdi-comment-outline ")])],1)]),2===parseInt(t.status)?i("div",{staticClass:"d-flex flex-column fill-width align-center justify-center"},[i("v-rating",{staticClass:"my-2",attrs:{dense:"","background-color":"orange lighten-3",color:"orange",large:""},model:{value:e.dialogService.data[r].rating,callback:function(t){e.$set(e.dialogService.data[r],"rating",e._n(t))},expression:"dialogService.data[iS].rating"}}),i("v-textarea",{staticClass:"d-block fill-width mb-2",attrs:{label:"Write review",outlined:"","hide-details":"",rows:"2"},model:{value:e.dialogService.data[r].rating_comment,callback:function(t){e.$set(e.dialogService.data[r],"rating_comment",t)},expression:"dialogService.data[iS].rating_comment"}}),i("div",{staticClass:"d-flex fill-width justify-end pb-2"},[i("v-btn",{staticClass:"rounded-lg text-capitalize",attrs:{small:"",color:"orange lighten-1",depressed:"",dark:""},on:{click:function(i){return i.preventDefault(),e.UpdateRating({id:t.id,rating:t.rating,rating_comment:t.rating_comment})}}},[e._v(" Submit Review ")])],1)],1):e._e()],1)])})),1):i("div",{staticClass:"d-flex px-4 pt-8 caption grey--text text--darken-2 justify-center"},[e._v(" no data ")])])],1)],1),i("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"320"},model:{value:e.dialogServiceNew.show,callback:function(t){e.$set(e.dialogServiceNew,"show",t)},expression:"dialogServiceNew.show"}},[e.dialogServiceNew.data?i("v-card",[i("v-card-title",{staticClass:"d-flex fill-width text-h6 align-center justify-space-between"},[e._v(" "+e._s(e.dialogServiceNew.data.id?"View Service":"Create Service Request")+" "),i("v-icon",{on:{click:function(t){t.preventDefault(),e.dialogServiceNew.show=!1}}},[e._v(" mdi-close ")])],1),i("v-divider"),i("v-card-text",{staticClass:"pt-4 pb-4",staticStyle:{"max-height":"300px"}},[e.dialogServiceNew.data.product_name?i("div",{staticClass:"font-weight-bold pb-4"},[e._v(" INV : "+e._s(e.dialogServiceNew.data.inv||"#")),i("br"),e._v(" Product : "+e._s(e.dialogServiceNew.data.product_name||"?")+" ")]):e._e(),i("v-textarea",{staticClass:"rounded-lg accent",attrs:{type:"text",label:"Services Notes / Comment",color:"primary",rows:"2",outlined:"",dense:"","hide-details":""},model:{value:e.dialogServiceNew.data.notes,callback:function(t){e.$set(e.dialogServiceNew.data,"notes",t)},expression:"dialogServiceNew.data.notes"}}),i("v-row",{staticClass:"align-center pt-4",attrs:{"no-gutters":""}},[e._l(e.dialogServiceNew.data.images.filter((function(e,t){return t<2})),(function(t,r){return i("v-col",{key:"img-"+r,staticClass:"pa-1",attrs:{cols:"6"}},[i("div",{staticClass:"bg-cover blue lighten-5 rounded-lg",staticStyle:{position:"relative","padding-bottom":"100%"},style:{backgroundImage:"url("+t+")"}},[i("span",{staticStyle:{position:"absolute",top:"0px",right:"2px"},on:{click:function(t){return t.preventDefault(),e.RemoveImage(r)}}},[i("v-icon",{attrs:{color:"red"}},[e._v(" mdi-close ")])],1)])])})),e.dialogServiceNew.data.images.length<2?i("v-col",{staticClass:"pa-1 fill-height",attrs:{cols:"6"}},[i("div",{staticClass:"d-flex fill-width justify-center align-center fill-width rounded-lg blue lighten-5 fill-height",staticStyle:{position:"relative"},on:{click:function(t){return t.preventDefault(),e.GET_PHOTO()}}},[i("div",{staticStyle:{width:"1px","padding-bottom":"100%"}}),i("v-icon",{attrs:{color:"primary"}},[e._v(" mdi-file-image ")])],1)]):e._e()],2)],1),i("v-divider"),e.dialogServiceNew.data?i("v-card-actions",{staticClass:"py-4"},[i("v-spacer"),i("v-btn",{staticClass:"text-capitalize rounded-lg px-4",attrs:{disabled:!!parseInt(e.dialogServiceNew.data.id),color:"primary lighten-1",depressed:""},on:{click:function(t){return e.PROCESS_SERVICE()}}},[e._v(" Create service request ")]),i("v-spacer")],1):e._e()],1):e._e()],1)],2):e._e()},a=[],s=i("1da1"),n=(i("96cf"),i("7db0"),i("d3b7"),i("c740"),i("b0c0"),i("4e82"),i("4de4"),i("a434"),{name:"MyProduct",data:function(){return{viewSelected:"product",dialogService:{show:!1,data:[],total:0},dialogServiceNew:{show:!1,data:null}}},computed:{myProducts:function(){for(var e=this,t=[],i=this.$store.state.order.data,r=function(r){for(var a=i[r].iseller_detail.order_details,s=function(s){var n=e.$store.state.product.data.find((function(e){return e.iseller_id===a[s].product_id})),d=t.findIndex((function(e){return e.product_id===a[s].product_id})),o=e.FindService({order_id:i[r].iseller_detail.order_id,product_id:a[s].product_id});d>-1?(t[d].quantity+=parseInt(a[s].quantity)||0,t[d].order_list.push(Object.assign(a[s],{order_id:i[r].iseller_detail.order_id,order_date:i[r].iseller_detail.order_date,order_reference:i[r].iseller_detail.order_reference,service_id:parseInt(o.id)||0,service_status:parseInt(o.status)||0,service_status_text:o.status_text||"Undefined",service_notes:o.notes||"",service_rating:o.rating||5,service_rating_comment:o.rating_comment||""}))):t.push({name:a[s].product_generic_name,quantity:parseInt(a[s].quantity)||0,images:n?n.images:"[]",product_id:a[s].product_id,order_list:[Object.assign(a[s],{order_id:i[r].iseller_detail.order_id,order_date:i[r].iseller_detail.order_date,order_reference:i[r].iseller_detail.order_reference,service_id:parseInt(o.id)||0,service_status:parseInt(o.status)||0,service_status_text:o.status_text||"Undefined",service_notes:o.notes||"",service_rating:o.rating||5,service_rating_comment:o.rating_comment||""})]})},n=0;n<a.length;n++)s(n)},a=0;a<i.length;a++)r(a);return t}},watch:{"dialogService.show":function(e){e&&this.LoadService()},$route:{immediate:!0,handler:function(e,t){"MyProduct"===e.name&&this.LoadService(!0)}}},mounted:function(){this.$store.state.order.data.length,this.LoadService(!0)},methods:{UpdateRating:function(e){var t=this;this.$store.dispatch("PENGAJUAN_SERVIS_PROCESS",e).then((function(e){e.status?t.$store.commit("SNACKBAR",{show:!0,text:"Review updated, thank you!"}):t.$store.commit("SNACKBAR",{show:!0,text:"Ops, something went wrong!"})}))},GetServiceOrderNumber:function(e){try{var t=JSON.parse(e.detail_order);if(t&&t.order_reference){var i=t.order_reference;if(i)return i}}catch(r){}return""},GetServiceProductName:function(e,t){try{var i=JSON.parse(e.detail_order);if(i&&i.order_details){var r=i.order_details.find((function(e){return e.product_id===t}));if(r)return r.product_name||"Undefined"}}catch(a){}return"Undefined"},FindService:function(e){var t=this.dialogService.data.filter((function(t){return t.order_id===e.order_id&&t.product_id===e.product_id})).sort((function(e,t){var i=parseInt(e.id),r=parseInt(t.id);return i<r?1:i>r?-1:0}));if(t.length){var i=Object.assign({},t[0]);return i.status_text=this.ServiceStatus(i.status),i}return{}},ServiceStatus:function(e){var t="Undefined";return 0===parseInt(e)?t="Request Sent":1===parseInt(e)?t="Confirmed":2===parseInt(e)?t="Completed":99===parseInt(e)&&(t="Declined"),t},OpenService:function(e){this.dialogServiceNew.data=Object.assign({},{id:parseInt(e.id)||null,user:this.$store.state.user.id,inv:e.inv,product_name:e.product_name,images:this.$StrToArray(e.images),order_id:e.order_id,product_id:e.product_id,notes:e.notes||"",status:parseInt(e.status)||0}),this.dialogServiceNew.show=!0},RemoveImage:function(e){if(!confirm("Delete photo?"))return!1;this.dialogServiceNew.data.images.splice(e,1)},GET_PHOTO:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Camera().getPhoto({quality:90,width:450,allowEditing:!1,source:e.$CameraSource().Photos,resultType:e.$CameraResultType().DataUrl});case 2:return i=t.sent,t.next=5,e.$store.dispatch("UPLOAD_FILE",{file:i.dataUrl}).then((function(t){t?t.data.data.res?e.dialogServiceNew.data.images.push(t.data.data.secure_url):e.$store.commit("SNACKBAR",{show:!0,text:"Failed!"}):e.$store.commit("SNACKBAR",{show:!0,text:"Upload failed!"})}));case 5:case"end":return t.stop()}}),t)})))()},PROCESS_SERVICE:function(){var e=this,t=Object.assign({},this.dialogServiceNew.data);return t.images=this.$ArrayToStr(t.images),t.order_id&&t.product_id?t.notes?void this.$store.dispatch("PENGAJUAN_SERVIS_PROCESS",t).then((function(t){t.status?(e.LoadService(!0),e.$store.commit("SNACKBAR",{show:!0,text:"New service request created!"}),e.dialogServiceNew.show=!1):e.$store.commit("SNACKBAR",{show:!0,text:"Ops, something went wrong!"})})):(this.$store.commit("SNACKBAR",{show:!0,text:"Please input notes or comment!"}),!1):(this.$store.commit("SNACKBAR",{show:!0,text:"Ops, Invalid params!"}),!1)},LoadService:function(e){var t=this;this.dialogService.show=!e,this.$store.dispatch("PENGAJUAN_SERVIS_GET").then((function(e){e.status?(t.dialogService.data=e.data.data.data||[],t.dialogService.total=parseInt(e.data.data.total)):t.$store.commit("SNACKBAR",{show:!0,text:"Something went wrong!"})}))}}}),d=n,o=(i("0767"),i("2877")),l=Object(o["a"])(d,r,a,!1,null,null,null);t["default"]=l.exports},d998:function(e,t,i){var r=i("342f");e.exports=/MSIE|Trident/.test(r)}}]);
//# sourceMappingURL=myproduct.f7cd8aaa.js.map