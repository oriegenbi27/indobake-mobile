(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{c66d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.userEdit?a("div",{staticClass:"d-flex justify-center py-2",staticStyle:{width:"100%",height:"calc(100vh - 117px)"}},[t.$store.state.user?a("v-card",{staticClass:"px-4 pb-8 pt-4 rounded-lg elevation-0",staticStyle:{"min-width":"98%"}},[a("div",{staticClass:"text-h5 text-center pb-6 pt-2"},[t._v(" My Account "),"mitra"!==t.$store.state.user.role||parseInt(t.$store.state.user.sub_id)?t._e():a("div",{staticClass:"d-flex align-center justify-center fill-width pa-4"},[a("v-btn",{staticClass:"rounded-pill text-capitalize px-6",attrs:{outlined:"",color:"primary"},on:{click:function(e){e.preventDefault(),t.mitra_subs_dialog=!0}}},[a("v-icon",{staticClass:"mr-3",attrs:{small:""}},[t._v(" mdi-account-group ")]),t._v(" Mitra Sub Account ")],1)],1)]),"mitra"===t.$store.state.user.role&&parseInt(t.$store.state.user.sub_id)?t._e():a("div",{staticClass:"pt-3 px-2"},[a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{readonly:"",type:"text",label:"Name",color:"primary",outlined:"","hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.UPDATE_ME()}},model:{value:t.userEdit.name,callback:function(e){t.$set(t.userEdit,"name",e)},expression:"userEdit.name"}}),a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{readonly:"",type:"email",label:"Email",color:"primary",outlined:"","hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.UPDATE_ME()}},model:{value:t.userEdit.email,callback:function(e){t.$set(t.userEdit,"email",e)},expression:"userEdit.email"}}),a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{readonly:"",type:"text",label:"Phone",color:"primary",outlined:"","hide-details":""},on:{keypress:[t.$NumberOnly,function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.UPDATE_ME()}]},model:{value:t.userEdit.phone,callback:function(e){t.$set(t.userEdit,"phone",e)},expression:"userEdit.phone"}}),"mitra"===t.$store.state.user.role?a("div",[a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{type:"text",label:"Bank Name",color:"primary",outlined:"","hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.UPDATE_ME()}},model:{value:t.userEdit.bank,callback:function(e){t.$set(t.userEdit,"bank",e)},expression:"userEdit.bank"}}),a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{type:"text",label:"Bank Account Number",color:"primary",outlined:"","hide-details":""},on:{keypress:[t.$NumberOnly,function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.UPDATE_ME()}]},model:{value:t.userEdit.bank_number,callback:function(e){t.$set(t.userEdit,"bank_number",e)},expression:"userEdit.bank_number"}}),a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{type:"text",label:"Bank Account Name",color:"primary",outlined:"","hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.UPDATE_ME()}},model:{value:t.userEdit.bank_account,callback:function(e){t.$set(t.userEdit,"bank_account",e)},expression:"userEdit.bank_account"}})],1):t._e(),a("v-btn",{staticClass:"rounded-lg text-capitalize body-1",attrs:{block:"",color:"primary lighten-1",depressed:"",large:"",dark:""},on:{click:function(e){return e.preventDefault(),t.UPDATE_ME()}}},[t._v(" Update ")])],1),"mitra"===t.$store.state.user.role&&parseInt(t.$store.state.user.sub_id)?t._e():a("v-divider",{staticClass:"my-6"}),"mitra"===t.$store.state.user.role&&parseInt(t.$store.state.user.sub_id)?t._e():a("div",{staticClass:"pt-2 px-2"},[a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{type:"password",label:"Old Password",color:"primary",outlined:"","hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.CHANGE_PASSWORD()}},model:{value:t.password.password_old,callback:function(e){t.$set(t.password,"password_old",e)},expression:"password.password_old"}}),a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{type:"password",label:"New Password",color:"primary",outlined:"","hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.CHANGE_PASSWORD()}},model:{value:t.password.password_new,callback:function(e){t.$set(t.password,"password_new",e)},expression:"password.password_new"}}),a("v-btn",{staticClass:"rounded-lg text-capitalize body-1",attrs:{block:"",color:"primary lighten-1",depressed:"",large:"",dark:""},on:{click:function(e){return e.preventDefault(),t.CHANGE_PASSWORD()}}},[t._v(" Change Password ")])],1),a("div",{staticClass:"pt-4 pb-16"},[a("v-btn",{staticClass:"text-capitalize mb-8",attrs:{block:"",color:"red",text:"",dark:""},on:{click:function(e){e.preventDefault(),t.$store.dispatch("ME_LOGOUT"),t.$router.replace("/")}}},[t._v(" Logout ")])],1)],1):t._e()],1):t._e(),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",persistent:"","no-click-animation":"",transition:"dialog-bottom-transition"},model:{value:t.mitra_subs_dialog,callback:function(e){t.mitra_subs_dialog=e},expression:"mitra_subs_dialog"}},[a("v-card",{staticClass:"rounded-0",attrs:{flat:""}},[a("v-toolbar",{staticClass:"elevation-0",attrs:{color:"accent"}},[a("v-toolbar-title",[t._v(" Mitra Sub Account ")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.mitra_subs_dialog=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1),a("v-divider"),t.$store.state.user?a("v-card",{staticClass:"px-4 py-2 elevation-0 rounded-0"},[a("div",{staticClass:"d-flex flex-column fill-width"},[t.mitra_subs.length?t._e():a("div",{staticClass:"d-flex fill-width justify-center py-4 my-1 font-weight-bold grey--text text--darken-1"},[t._v(" no sub account ")]),t._l(t.mitra_subs,(function(e,s){return a("div",{key:"ms-"+s,staticClass:"d-flex fill-width align-center justify-space-between py-2 my-1 font-weight-bold",on:{click:function(a){return a.preventDefault(),t.ShowMitraSub(e)}}},[a("div",[a("div",{staticClass:"d-flex fill-width justify-space-between "},[t._v(" "+t._s(e.name)+" (mitra#"+t._s(t.$store.state.user.id)+"#"+t._s(e.email)+") ")]),a("div",{staticClass:"grey--text"},[t._v(" "+t._s(e.phone)+" ")])]),a("v-icon",[t._v(" mdi-chevron-right ")])],1)})),a("div",{staticClass:"d-flex fill-width justify-center pa-4 mt-4"},[a("v-btn",{staticClass:"rounded-pill text-capitalize px-6",attrs:{depressed:"",small:"",color:"primary"},on:{click:function(e){return e.preventDefault(),t.ShowMitraSub()}}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v(" mdi-plus ")]),t._v(" Tambah Sub Account ")],1)],1)],2)]):t._e(),a("v-dialog",{attrs:{"hide-overlay":""},model:{value:t.dialogMitaSub.show,callback:function(e){t.$set(t.dialogMitaSub,"show",e)},expression:"dialogMitaSub.show"}},[a("v-card",{staticClass:"rounded-0"},[a("v-toolbar",{staticClass:"elevation-0",attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Mita Sub Account")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{dark:"",text:"",color:"yellow"},on:{click:function(e){t.dialogMitaSub.show=!1}}},[t._v(" Close ")])],1)],1),t.dialogMitaSub.data?a("div",{staticClass:"pa-4"},[a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{label:"Name",color:"primary",outlined:"","hide-details":""},model:{value:t.dialogMitaSub.data.name,callback:function(e){t.$set(t.dialogMitaSub.data,"name",e)},expression:"dialogMitaSub.data.name"}}),a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{prefix:"mitra#"+t.$store.state.user.id+"#",label:"Email",color:"primary",outlined:"","hide-details":""},model:{value:t.dialogMitaSub.data.email,callback:function(e){t.$set(t.dialogMitaSub.data,"email",e)},expression:"dialogMitaSub.data.email"}}),a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{label:"Phone",color:"primary",outlined:"","hide-details":""},on:{keypress:t.$NumberOnly},model:{value:t.dialogMitaSub.data.phone,callback:function(e){t.$set(t.dialogMitaSub.data,"phone",e)},expression:"dialogMitaSub.data.phone"}}),a("v-text-field",{staticClass:"mb-4 rounded-lg accent",attrs:{type:"password",label:"Login Passcode",color:"primary",outlined:"","hide-details":""},model:{value:t.dialogMitaSub.data.passcode,callback:function(e){t.$set(t.dialogMitaSub.data,"passcode",e)},expression:"dialogMitaSub.data.passcode"}}),a("v-btn",{staticClass:"rounded-lg text-capitalize body-1",attrs:{block:"",color:"primary lighten-1",depressed:"",large:"",dark:""},on:{click:function(e){return e.preventDefault(),t.ProcessMitraSub()}}},[t._v(" Simpan ")])],1):t._e()],1)],1)],1)],1)],1)},i=[],r=(a("b0c0"),a("ac1f"),a("5319"),a("2f62")),o={name:"Profile",data:function(){return{userEdit:null,password:{password_old:"",password_new:""},mitra_subs_dialog:!1,mitra_subs:[],dialogMitaSub:{show:!1,data:null}}},computed:Object(r["b"])({user:function(t){return t.user}}),watch:{$route:{immediate:!0,handler:function(t,e){"Profile"===t.name&&(this.mitra_subs=[],this.LoadMitraSub())}},user:function(t){this.userEdit=Object.assign({},t)}},mounted:function(){this.$store.state.user?this.userEdit=Object.assign({},this.$store.state.user):this.$router.replace("/")},methods:{ShowMitraSub:function(t){this.dialogMitaSub.data=t?Object.assign({},t):Object.assign({},{name:"",email:"",phone:"",passcode:"",mitra:this.$store.state.user.id}),this.dialogMitaSub.show=!0},LoadMitraSub:function(){var t=this;this.$store.state.user&&("mitra"!==this.$store.state.user.role||parseInt(this.$store.state.user.sub_id)||this.$store.dispatch("MITRA_SUB_GET",this.$store.state.user.id).then((function(e){e.status&&(e.data.error||(t.mitra_subs=e.data.data||[]))})))},ProcessMitraSub:function(){var t=this;if(this.dialogMitaSub){var e=Object.assign({},this.dialogMitaSub.data);if(!e.name||!e.email||!e.phone||!e.passcode)return this.$store.commit("SNACKBAR",{show:!0,text:"Data belum lengkap!"}),!1;this.$store.dispatch("MITRA_SUB_PROCESS",e).then((function(e){e.status?(t.$store.commit("SNACKBAR",{show:!0,text:"Berhasil diproses!"}),t.dialogMitaSub.show=!1,t.LoadMitraSub()):t.$store.commit("SNACKBAR",{show:!0,text:"Terjadi kesalahan!"})}))}else this.$store.commit("SNACKBAR",{show:!0,text:"Invalid!"})},UPDATE_ME:function(){if(!this.userEdit.name||!this.$validateEmail(this.userEdit.email))return this.$store.commit("SNACKBAR",{show:!0,text:"Please input valid name and email!"}),!1;this.$store.dispatch("ME_UPDATE",this.userEdit)},CHANGE_PASSWORD:function(){var t=this;if(!this.password.password_old||!this.password.password_new)return this.$store.commit("SNACKBAR",{show:!0,text:"Please input your old and new password!"}),!1;this.$store.dispatch("CHANGE_PASSWORD",this.password).then((function(e){e.status?e.data.data.response?(t.$store.commit("SNACKBAR",{show:!0,text:"Password changed!"}),t.password.password_old="",t.password.password_new=""):t.$store.commit("SNACKBAR",{show:!0,text:e.data.data.message}):t.$store.commit("SNACKBAR",{show:!0,text:"Something went wrong!"})}))}}},l=o,n=a("2877"),d=Object(n["a"])(l,s,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=profile.739da32f.js.map